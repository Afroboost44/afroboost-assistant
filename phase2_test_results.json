{
  "gift_cards": {
    "total_tests": 4,
    "passed": 3,
    "failed": 1,
    "success_rate": 75.0,
    "results": [
      {
        "test": "Create Gift Card",
        "success": true,
        "message": "Successfully created gift card with code: 11F74509",
        "timestamp": "2025-10-31T15:56:44.649652+00:00",
        "details": {
          "gift_card_id": "754a407d-0c2b-45bf-aac7-e65a229ff74d",
          "amount": 100.0,
          "currency": "CHF"
        }
      },
      {
        "test": "List Gift Cards",
        "success": true,
        "message": "Successfully retrieved 2 gift cards",
        "timestamp": "2025-10-31T15:56:45.159812+00:00",
        "details": {
          "total_cards": 2
        }
      },
      {
        "test": "Validate Gift Card",
        "success": true,
        "message": "Successfully validated gift card: 11F74509",
        "timestamp": "2025-10-31T15:56:45.670403+00:00",
        "details": {
          "code": "11F74509",
          "status": "active",
          "amount": 100.0
        }
      },
      {
        "test": "Redeem Gift Card",
        "success": false,
        "message": "Failed to redeem gift card: 500",
        "timestamp": "2025-10-31T15:56:46.179592+00:00",
        "details": {
          "response": "{\"detail\":\"unsupported operand type(s) for -: 'NoneType' and 'float'\"}"
        }
      }
    ]
  },
  "discounts": {
    "total_tests": 7,
    "passed": 7,
    "failed": 0,
    "success_rate": 100.0,
    "results": [
      {
        "test": "Create Discount",
        "success": true,
        "message": "Successfully created discount: SUMMER2024",
        "timestamp": "2025-10-31T15:56:46.957786+00:00",
        "details": {
          "discount_id": "b266604e-d22a-4a8b-8959-07c701006c49",
          "discount_value": 20.0
        }
      },
      {
        "test": "List Discounts",
        "success": true,
        "message": "Successfully retrieved 1 discounts",
        "timestamp": "2025-10-31T15:56:47.468431+00:00",
        "details": {
          "total_discounts": 1
        }
      },
      {
        "test": "Get Specific Discount",
        "success": true,
        "message": "Successfully retrieved discount: SUMMER2024",
        "timestamp": "2025-10-31T15:56:47.980513+00:00",
        "details": {
          "discount_id": "b266604e-d22a-4a8b-8959-07c701006c49",
          "code": "SUMMER2024"
        }
      },
      {
        "test": "Update Discount",
        "success": true,
        "message": "Successfully updated discount",
        "timestamp": "2025-10-31T15:56:48.494205+00:00",
        "details": {
          "discount_id": "b266604e-d22a-4a8b-8959-07c701006c49",
          "new_value": 25
        }
      },
      {
        "test": "Validate Discount Code",
        "success": true,
        "message": "Successfully validated discount code: SUMMER2024",
        "timestamp": "2025-10-31T15:56:49.004761+00:00",
        "details": {
          "code": "SUMMER2024",
          "response": {
            "valid": true,
            "discount": {
              "id": "b266604e-d22a-4a8b-8959-07c701006c49",
              "code": "SUMMER2024",
              "discount_type": "percentage",
              "discount_value": 25.0,
              "currency": "CHF",
              "name": "Summer Sale",
              "description": null,
              "start_date": "2025-10-31T15:56:46.938031+00:00",
              "end_date": "2025-11-30T15:56:46.938041+00:00",
              "is_active": true,
              "usage_limit": 100,
              "usage_count": 0,
              "per_user_limit": 1,
              "applicable_to": [],
              "minimum_purchase": null,
              "target_contacts": [],
              "target_tags": [],
              "created_by": "c8353966-33c6-4145-80d4-71f174f4a481",
              "created_at": "2025-10-31T15:56:46.944858+00:00",
              "updated_at": "2025-10-31T15:56:48.490396+00:00"
            },
            "discount_amount": 25.0,
            "final_amount": 75.0
          }
        }
      },
      {
        "test": "Delete Discount",
        "success": true,
        "message": "Successfully deleted discount",
        "timestamp": "2025-10-31T15:56:49.513738+00:00",
        "details": {
          "discount_id": "b266604e-d22a-4a8b-8959-07c701006c49"
        }
      },
      {
        "test": "Create Fixed Discount",
        "success": true,
        "message": "Successfully created fixed discount: FIXED50",
        "timestamp": "2025-10-31T15:56:50.028128+00:00",
        "details": {
          "discount_id": "34073bdd-9d85-4999-8130-a355eca0c39f",
          "discount_type": "fixed_amount"
        }
      }
    ]
  },
  "referrals": {
    "total_tests": 4,
    "passed": 2,
    "failed": 2,
    "success_rate": 50.0,
    "results": [
      {
        "test": "Create Referral",
        "success": false,
        "message": "Failed to create referral: 400",
        "timestamp": "2025-10-31T15:56:50.829603+00:00",
        "details": {
          "response": "{\"detail\":\"Referral already exists for this email\"}"
        }
      },
      {
        "test": "List My Referrals",
        "success": true,
        "message": "Successfully retrieved 1 referrals",
        "timestamp": "2025-10-31T15:56:51.339921+00:00",
        "details": {
          "total_referrals": 1
        }
      },
      {
        "test": "Get Referral Stats",
        "success": true,
        "message": "Successfully retrieved referral stats",
        "timestamp": "2025-10-31T15:56:51.851296+00:00",
        "details": {
          "total_referrals": 1,
          "referral_code": "25EA1204"
        }
      },
      {
        "test": "Complete Referral",
        "success": false,
        "message": "No referrals available",
        "timestamp": "2025-10-31T15:56:52.351411+00:00",
        "details": {}
      }
    ]
  },
  "ad_chat": {
    "total_tests": 8,
    "passed": 8,
    "failed": 0,
    "success_rate": 100.0,
    "results": [
      {
        "test": "Start Ad Chat",
        "success": true,
        "message": "Successfully started ad chat with session: 5181b737-1b02-4335-a8d0-bb4f64b00819",
        "timestamp": "2025-10-31T15:56:53.117772+00:00",
        "details": {
          "chat_id": "824fdedd-cf11-4d86-ab5e-9b33f4c293be",
          "ad_platform": "facebook",
          "visitor_name": "John Visitor"
        }
      },
      {
        "test": "Send Visitor Message",
        "success": true,
        "message": "Successfully sent visitor message",
        "timestamp": "2025-10-31T15:56:53.628867+00:00",
        "details": {
          "chat_id": "824fdedd-cf11-4d86-ab5e-9b33f4c293be",
          "sender": "visitor"
        }
      },
      {
        "test": "Send Agent Message",
        "success": true,
        "message": "Successfully sent agent message",
        "timestamp": "2025-10-31T15:56:54.139129+00:00",
        "details": {
          "chat_id": "824fdedd-cf11-4d86-ab5e-9b33f4c293be",
          "sender": "agent"
        }
      },
      {
        "test": "List Chats",
        "success": true,
        "message": "Successfully retrieved 3 chats",
        "timestamp": "2025-10-31T15:56:54.649815+00:00",
        "details": {
          "total_chats": 3
        }
      },
      {
        "test": "Filter Chats by Status",
        "success": true,
        "message": "Successfully filtered chats by status: 1 active chats",
        "timestamp": "2025-10-31T15:56:55.159347+00:00",
        "details": {
          "active_chats": 1
        }
      },
      {
        "test": "Get Specific Chat",
        "success": true,
        "message": "Successfully retrieved chat with messages",
        "timestamp": "2025-10-31T15:56:55.670157+00:00",
        "details": {
          "chat_id": "824fdedd-cf11-4d86-ab5e-9b33f4c293be",
          "message_count": 3
        }
      },
      {
        "test": "Update Chat",
        "success": true,
        "message": "Successfully updated chat",
        "timestamp": "2025-10-31T15:56:56.183006+00:00",
        "details": {
          "chat_id": "824fdedd-cf11-4d86-ab5e-9b33f4c293be",
          "new_status": "resolved",
          "lead_score": 85
        }
      },
      {
        "test": "Convert Chat to Contact",
        "success": true,
        "message": "Successfully converted chat to contact",
        "timestamp": "2025-10-31T15:56:56.693316+00:00",
        "details": {
          "chat_id": "824fdedd-cf11-4d86-ab5e-9b33f4c293be",
          "response": {
            "message": "Chat converted to contact successfully",
            "contact_id": "7fc718fb-578f-4531-bea6-a47ee4fcade4"
          }
        }
      }
    ]
  }
}